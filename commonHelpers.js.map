{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '../css/styles.css';\nimport '../css/reset.css';\n\nconst input = document.querySelector('.custom-input');\nconst btn = document.querySelector('.custom-button');\nconst galleryContainer = document.querySelector('.gallery-container');\nconst loadingOverlay = document.querySelector('.loading-overlay');\nconst API_KEY = '41491807-1b535ad0388c573d86abaf339';\n\nconst getBaseUrl = () => {\n  const url = new URL('https://pixabay.com/api/');\n  url.searchParams.append('key', API_KEY);\n  return url;\n};\n\nfunction searchPixabay() {\n  const searchTerm = input.value.trim();\n\n  galleryContainer.innerHTML = '';\n  loadingOverlay.style.display = 'flex';\n\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Something wrong',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n      progressBarColor: 'rgb(255, 0, 0)',\n    });\n    loadingOverlay.style.display = 'none';\n    return;\n  }\n\n  const apiUrl = getBaseUrl();\n  apiUrl.searchParams.append('q', searchTerm);\n  apiUrl.searchParams.append('image_type', 'photo');\n  apiUrl.searchParams.append('orientation', 'horizontal');\n  apiUrl.searchParams.append('safesearch', 'true');\n\n  fetch(apiUrl)\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error(`Network response not ok`);\n      }\n    })\n    .then(images => {\n      loadingOverlay.style.display = 'none';\n\n      if (images.hits && images.hits.length > 0) {\n        input.value = '';\n        galleryMarkup(images.hits);\n      } else {\n        iziToast.info({\n          title: 'Something wrong',\n          message:\n            'Sorry, there are no images matching your search query. Please try again.',\n          position: 'topRight',\n          progressBarColor: 'rgb(255, 0, 0)',\n        });\n      }\n    })\n    .catch(error => {\n      loadingOverlay.style.display = 'none';\n      iziToast.error({\n        title: 'Something wrong',\n        message: 'Sorry, there was an error. Please try again.',\n        position: 'topRight',\n        progressBarColor: 'rgb(255, 0, 0)',\n      });\n    });\n}\n\nbtn.addEventListener('click', searchPixabay);\n\n// IMAGES HTML\n\nfunction galleryMarkup(arr) {\n  const markup = arr\n    .map(\n      image => `\n        <a href=\"${image.largeImageURL}\" class=\"image-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <div class=\"image-info\">\n            <p>Likes: ${image.likes}</p>\n            <p>Views: ${image.views}</p>\n            <p>Comments: ${image.comments}</p>\n            <p>Downloads: ${image.downloads}</p>\n          </div>\n        </a>\n      `\n    )\n    .join('');\n\n  galleryContainer.innerHTML = markup;\n  const lightbox = new SimpleLightbox('.gallery-container a', {\n    captionsData: 'alt',\n    captionsDelay: 250,\n  });\n  lightbox.refresh();\n}\n"],"names":["input","btn","galleryContainer","loadingOverlay","API_KEY","getBaseUrl","url","searchPixabay","searchTerm","iziToast","apiUrl","response","images","galleryMarkup","error","arr","markup","image","SimpleLightbox"],"mappings":"6vBAOA,MAAMA,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAM,SAAS,cAAc,gBAAgB,EAC7CC,EAAmB,SAAS,cAAc,oBAAoB,EAC9DC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAU,qCAEVC,EAAa,IAAM,CACvB,MAAMC,EAAM,IAAI,IAAI,0BAA0B,EAC9C,OAAAA,EAAI,aAAa,OAAO,MAAOF,CAAO,EAC/BE,CACT,EAEA,SAASC,GAAgB,CACvB,MAAMC,EAAaR,EAAM,MAAM,KAAI,EAKnC,GAHAE,EAAiB,UAAY,GAC7BC,EAAe,MAAM,QAAU,OAE3BK,IAAe,GAAI,CACrBC,EAAS,MAAM,CACb,MAAO,kBACP,QAAS,8BACT,SAAU,WACV,iBAAkB,gBACxB,CAAK,EACDN,EAAe,MAAM,QAAU,OAC/B,MACD,CAED,MAAMO,EAASL,IACfK,EAAO,aAAa,OAAO,IAAKF,CAAU,EAC1CE,EAAO,aAAa,OAAO,aAAc,OAAO,EAChDA,EAAO,aAAa,OAAO,cAAe,YAAY,EACtDA,EAAO,aAAa,OAAO,aAAc,MAAM,EAE/C,MAAMA,CAAM,EACT,KAAKC,GAAY,CAChB,GAAIA,EAAS,GACX,OAAOA,EAAS,OAEhB,MAAM,IAAI,MAAM,yBAAyB,CAEjD,CAAK,EACA,KAAKC,GAAU,CACdT,EAAe,MAAM,QAAU,OAE3BS,EAAO,MAAQA,EAAO,KAAK,OAAS,GACtCZ,EAAM,MAAQ,GACda,EAAcD,EAAO,IAAI,GAEzBH,EAAS,KAAK,CACZ,MAAO,kBACP,QACE,2EACF,SAAU,WACV,iBAAkB,gBAC5B,CAAS,CAET,CAAK,EACA,MAAMK,GAAS,CACdX,EAAe,MAAM,QAAU,OAC/BM,EAAS,MAAM,CACb,MAAO,kBACP,QAAS,+CACT,SAAU,WACV,iBAAkB,gBAC1B,CAAO,CACP,CAAK,CACL,CAEAR,EAAI,iBAAiB,QAASM,CAAa,EAI3C,SAASM,EAAcE,EAAK,CAC1B,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA,mBACIA,EAAM;AAAA,sBACHA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,wBAEhCA,EAAM;AAAA,wBACNA,EAAM;AAAA,2BACHA,EAAM;AAAA,4BACLA,EAAM;AAAA;AAAA;AAAA,OAI7B,EACA,KAAK,EAAE,EAEVf,EAAiB,UAAYc,EACZ,IAAIE,EAAe,uBAAwB,CAC1D,aAAc,MACd,cAAe,GACnB,CAAG,EACQ,QAAO,CAClB"}